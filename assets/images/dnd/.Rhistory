geom_segment(data=base_data1, aes(x = start, y = -1, xend = end, yend = -1),
colour = "grey", alpha=0.8, linewidth=0.6 , inherit.aes = FALSE )  +
geom_text(data=base_data1, aes(x = title_position, y = -4, label=str_to_title(species)),
hjust=c(0.5,0.5,0.4,0.4,0,0.5,0.5,1),
vjust=c(1,1,1,0,0,0,0,0),
colour = "grey", alpha=0.8, family="goudy_bookletter", inherit.aes = FALSE)+
coord_radial(start=0*pi, end=2*pi, inner.radius=0.5,
r.axis.inside = TRUE)+
theme(axis.text.y=element_text(family="goudy_bookletter", size=10),
legend.text = element_text(family = "goudy_bookletter", size = 14),
legend.title = element_text(family = "goudy_bookletter", size = 14),
legend.background = element_blank(),
legend.box.background = element_blank(),
legend.position = "top",
legend.box="horizontal",
legend.direction = "horizontal",
plot.margin = margin(0,0,0,0))+
labs(color="School:",
y="Level")+
guides(fill="none")
p2
p2 <- ggplot(sbs_unnested, aes(id, level, tooltip = paste(paste0(name, ":"), description, sep = "\n\n"), data_id = name))+
geom_point_interactive(aes(color=school, fill=school), size=2)+
theme_void()+
scale_y_discrete(limits=rev)+
scale_fill_manual_interactive(values=school_colors1)+
scale_color_manual_interactive(values=school_colors1,
labels = str_to_title(names(school_colors1)))+
geom_segment(data=base_data1, aes(x = start, y = -1, xend = end, yend = -1),
colour = "grey", alpha=0.8, linewidth=0.6 , inherit.aes = FALSE )  +
geom_text(data=base_data1, aes(x = title_position, y = -4, label=str_to_title(species)),
hjust=c(0.5,0.5,0.3,0.3,0,0.5,0.5,1),
vjust=c(1,1,1,0,0,0,0,0),
colour = "grey", alpha=0.8, family="goudy_bookletter", inherit.aes = FALSE)+
coord_radial(start=0*pi, end=2*pi, inner.radius=0.5,
r.axis.inside = TRUE)+
theme(axis.text.y=element_text(family="goudy_bookletter", size=10),
legend.text = element_text(family = "goudy_bookletter", size = 14),
legend.title = element_text(family = "goudy_bookletter", size = 14),
legend.background = element_blank(),
legend.box.background = element_blank(),
legend.position = "top",
legend.box="horizontal",
legend.direction = "horizontal",
plot.margin = margin(0,0,0,0))+
labs(color="School:",
y="Level")+
guides(fill="none")
p2
p2 <- ggplot(sbs_unnested, aes(id, level, tooltip = paste(paste0(name, ":"), description, sep = "\n\n"), data_id = name))+
geom_point_interactive(aes(color=school, fill=school), size=2)+
theme_void()+
scale_y_discrete(limits=rev)+
scale_fill_manual_interactive(values=school_colors1)+
scale_color_manual_interactive(values=school_colors1,
labels = str_to_title(names(school_colors1)))+
geom_segment(data=base_data1, aes(x = start, y = -1, xend = end, yend = -1),
colour = "grey", alpha=0.8, linewidth=0.6 , inherit.aes = FALSE )  +
geom_text(data=base_data1, aes(x = title_position, y = -4, label=str_to_title(species)),
hjust=c(0.5,0.5,0.3,0.3,0.3,0.5,0.5,1),
vjust=c(1,1,1,0,0,0,0,0),
colour = "grey", alpha=0.8, family="goudy_bookletter", inherit.aes = FALSE)+
coord_radial(start=0*pi, end=2*pi, inner.radius=0.5,
r.axis.inside = TRUE)+
theme(axis.text.y=element_text(family="goudy_bookletter", size=10),
legend.text = element_text(family = "goudy_bookletter", size = 14),
legend.title = element_text(family = "goudy_bookletter", size = 14),
legend.background = element_blank(),
legend.box.background = element_blank(),
legend.position = "top",
legend.box="horizontal",
legend.direction = "horizontal",
plot.margin = margin(0,0,0,0))+
labs(color="School:",
y="Level")+
guides(fill="none")
p2
p2 <- ggplot(sbs_unnested, aes(id, level, tooltip = paste(paste0(name, ":"), description, sep = "\n\n"), data_id = name))+
geom_point_interactive(aes(color=school, fill=school), size=2)+
theme_void()+
scale_y_discrete(limits=rev)+
scale_fill_manual_interactive(values=school_colors1)+
scale_color_manual_interactive(values=school_colors1,
labels = str_to_title(names(school_colors1)))+
geom_segment(data=base_data1, aes(x = start, y = -1, xend = end, yend = -1),
colour = "grey", alpha=0.8, linewidth=0.6 , inherit.aes = FALSE )  +
geom_text(data=base_data1, aes(x = title_position, y = -4, label=str_to_title(species)),
hjust=c(0.5,0.5,0.3,0.3,0.3,0.5,0.5,0.5),
vjust=c(1,1,1,0,0,0,0,0),
colour = "grey", alpha=0.8, family="goudy_bookletter", inherit.aes = FALSE)+
coord_radial(start=0*pi, end=2*pi, inner.radius=0.5,
r.axis.inside = TRUE)+
theme(axis.text.y=element_text(family="goudy_bookletter", size=10),
legend.text = element_text(family = "goudy_bookletter", size = 14),
legend.title = element_text(family = "goudy_bookletter", size = 14),
legend.background = element_blank(),
legend.box.background = element_blank(),
legend.position = "top",
legend.box="horizontal",
legend.direction = "horizontal",
plot.margin = margin(0,0,0,0))+
labs(color="School:",
y="Level")+
guides(fill="none")
p2
p2 <- ggplot(sbs_unnested, aes(id, level, tooltip = paste(paste0(name, ":"), description, sep = "\n\n"), data_id = name))+
geom_point_interactive(aes(color=school, fill=school), size=2)+
theme_void()+
scale_y_discrete(limits=rev)+
scale_fill_manual_interactive(values=school_colors1)+
scale_color_manual_interactive(values=school_colors1,
labels = str_to_title(names(school_colors1)))+
geom_segment(data=base_data1, aes(x = start, y = -1, xend = end, yend = -1),
colour = "grey", alpha=0.8, linewidth=0.6 , inherit.aes = FALSE )  +
geom_text(data=base_data1, aes(x = title_position, y = -4, label=str_to_title(species)),
hjust=c(0.5,0.5,0.3,0.3,0.3,0.5,0.5,0.3),
vjust=c(1,1,1,0,0,0,0,0),
colour = "grey", alpha=0.8, family="goudy_bookletter", inherit.aes = FALSE)+
coord_radial(start=0*pi, end=2*pi, inner.radius=0.5,
r.axis.inside = TRUE)+
theme(axis.text.y=element_text(family="goudy_bookletter", size=10),
legend.text = element_text(family = "goudy_bookletter", size = 14),
legend.title = element_text(family = "goudy_bookletter", size = 14),
legend.background = element_blank(),
legend.box.background = element_blank(),
legend.position = "top",
legend.box="horizontal",
legend.direction = "horizontal",
plot.margin = margin(0,0,0,0))+
labs(color="School:",
y="Level")+
guides(fill="none")
p2
p2 <- ggplot(sbs_unnested, aes(id, level, tooltip = paste(paste0(name, ":"), description, sep = "\n\n"), data_id = name))+
geom_point_interactive(aes(color=school, fill=school), size=2)+
theme_void()+
scale_y_discrete(limits=rev)+
scale_fill_manual_interactive(values=school_colors1)+
scale_color_manual_interactive(values=school_colors1,
labels = str_to_title(names(school_colors1)))+
geom_segment(data=base_data1, aes(x = start, y = -1, xend = end, yend = -1),
colour = "grey", alpha=0.8, linewidth=0.6 , inherit.aes = FALSE )  +
geom_text(data=base_data1, aes(x = title_position, y = -4, label=str_to_title(species)),
hjust=c(0.5,0.5,0.3,0.3,0.3,0.5,0.5,0.6),
vjust=c(1,1,1,0,0,0,0,0),
colour = "grey", alpha=0.8, family="goudy_bookletter", inherit.aes = FALSE)+
coord_radial(start=0*pi, end=2*pi, inner.radius=0.5,
r.axis.inside = TRUE)+
theme(axis.text.y=element_text(family="goudy_bookletter", size=10),
legend.text = element_text(family = "goudy_bookletter", size = 14),
legend.title = element_text(family = "goudy_bookletter", size = 14),
legend.background = element_blank(),
legend.box.background = element_blank(),
legend.position = "top",
legend.box="horizontal",
legend.direction = "horizontal",
plot.margin = margin(0,0,0,0))+
labs(color="School:",
y="Level")+
guides(fill="none")
p2
p2 <- ggplot(sbs_unnested, aes(id, level, tooltip = paste(paste0(name, ":"), description, sep = "\n\n"), data_id = name))+
geom_point_interactive(aes(color=school, fill=school), size=2)+
theme_void()+
scale_y_discrete(limits=rev)+
scale_fill_manual_interactive(values=school_colors1)+
scale_color_manual_interactive(values=school_colors1,
labels = str_to_title(names(school_colors1)))+
geom_segment(data=base_data1, aes(x = start, y = -1, xend = end, yend = -1),
colour = "grey", alpha=0.8, linewidth=0.6 , inherit.aes = FALSE )  +
geom_text(data=base_data1, aes(x = title_position, y = -4, label=str_to_title(species)),
hjust=c(0.5,0.5,0.3,0.3,0.3,0.6,0.5,0.6),
vjust=c(1,1,1,0,0,0,0,0),
colour = "grey", alpha=0.8, family="goudy_bookletter", inherit.aes = FALSE)+
coord_radial(start=0*pi, end=2*pi, inner.radius=0.5,
r.axis.inside = TRUE)+
theme(axis.text.y=element_text(family="goudy_bookletter", size=10),
legend.text = element_text(family = "goudy_bookletter", size = 14),
legend.title = element_text(family = "goudy_bookletter", size = 14),
legend.background = element_blank(),
legend.box.background = element_blank(),
legend.position = "top",
legend.box="horizontal",
legend.direction = "horizontal",
plot.margin = margin(0,0,0,0))+
labs(color="School:",
y="Level")+
guides(fill="none")
p2
p2 <- ggplot(sbs_unnested, aes(id, level, tooltip = paste(paste0(name, ":"), description, sep = "\n\n"), data_id = name))+
geom_point_interactive(aes(color=school, fill=school), size=2)+
theme_void()+
scale_y_discrete(limits=rev)+
scale_fill_manual_interactive(values=school_colors1)+
scale_color_manual_interactive(values=school_colors1,
labels = str_to_title(names(school_colors1)))+
geom_segment(data=base_data1, aes(x = start, y = -1, xend = end, yend = -1),
colour = "grey", alpha=0.8, linewidth=0.6 , inherit.aes = FALSE )  +
geom_text(data=base_data1, aes(x = title_position, y = -4, label=str_to_title(species)),
hjust=c(0.5,0.5,0.3,0.3,0.3,0.2,0.5,0.6),
vjust=c(1,1,1,0,0,0,0,0),
colour = "grey", alpha=0.8, family="goudy_bookletter", inherit.aes = FALSE)+
coord_radial(start=0*pi, end=2*pi, inner.radius=0.5,
r.axis.inside = TRUE)+
theme(axis.text.y=element_text(family="goudy_bookletter", size=10),
legend.text = element_text(family = "goudy_bookletter", size = 14),
legend.title = element_text(family = "goudy_bookletter", size = 14),
legend.background = element_blank(),
legend.box.background = element_blank(),
legend.position = "top",
legend.box="horizontal",
legend.direction = "horizontal",
plot.margin = margin(0,0,0,0))+
labs(color="School:",
y="Level")+
guides(fill="none")
p2
p2 <- ggplot(sbs_unnested, aes(id, level, tooltip = paste(paste0(name, ":"), description, sep = "\n\n"), data_id = name))+
geom_point_interactive(aes(color=school, fill=school), size=2)+
theme_void()+
scale_y_discrete(limits=rev)+
scale_fill_manual_interactive(values=school_colors1)+
scale_color_manual_interactive(values=school_colors1,
labels = str_to_title(names(school_colors1)))+
geom_segment(data=base_data1, aes(x = start, y = -1, xend = end, yend = -1),
colour = "grey", alpha=0.8, linewidth=0.6 , inherit.aes = FALSE )  +
geom_text(data=base_data1, aes(x = title_position, y = -4, label=str_to_title(species)),
hjust=c(0.5,0.5,0.3,0.3,0.3,0.5,0.5,0.6),
vjust=c(1,1,1,0,0,0,0,0),
colour = "grey", alpha=0.8, family="goudy_bookletter", inherit.aes = FALSE)+
coord_radial(start=0*pi, end=2*pi, inner.radius=0.5,
r.axis.inside = TRUE)+
theme(axis.text.y=element_text(family="goudy_bookletter", size=10),
legend.text = element_text(family = "goudy_bookletter", size = 14),
legend.title = element_text(family = "goudy_bookletter", size = 14),
legend.background = element_blank(),
legend.box.background = element_blank(),
legend.position = "top",
legend.box="horizontal",
legend.direction = "horizontal",
plot.margin = margin(0,0,0,0))+
labs(color="School:",
y="Level")+
guides(fill="none")
p2
p2 <- ggplot(sbs_unnested, aes(id, level, tooltip = paste(paste0(name, ":"), description, sep = "\n\n"), data_id = name))+
geom_point_interactive(aes(color=school, fill=school), size=2)+
theme_void()+
scale_y_discrete(limits=rev)+
scale_fill_manual_interactive(values=school_colors1)+
scale_color_manual_interactive(values=school_colors1,
labels = str_to_title(names(school_colors1)))+
geom_segment(data=base_data1, aes(x = start, y = -1, xend = end, yend = -1),
colour = "grey", alpha=0.8, linewidth=0.6 , inherit.aes = FALSE )  +
geom_text(data=base_data1, aes(x = title_position, y = -4, label=str_to_title(species)),
hjust=c(0.5,0.5,0.3,0.3,0.4,0.5,0.5,0.6),
vjust=c(1,1,1,0,0,0,0,0),
colour = "grey", alpha=0.8, family="goudy_bookletter", inherit.aes = FALSE)+
coord_radial(start=0*pi, end=2*pi, inner.radius=0.5,
r.axis.inside = TRUE)+
theme(axis.text.y=element_text(family="goudy_bookletter", size=10),
legend.text = element_text(family = "goudy_bookletter", size = 14),
legend.title = element_text(family = "goudy_bookletter", size = 14),
legend.background = element_blank(),
legend.box.background = element_blank(),
legend.position = "top",
legend.box="horizontal",
legend.direction = "horizontal",
plot.margin = margin(0,0,0,0))+
labs(color="School:",
y="Level")+
guides(fill="none")
p2
p2 <- ggplot(sbs_unnested, aes(id, level, tooltip = paste(paste0(name, ":"), description, sep = "\n\n"), data_id = name))+
geom_point_interactive(aes(color=school, fill=school), size=2)+
theme_void()+
scale_y_discrete(limits=rev)+
scale_fill_manual_interactive(values=school_colors1)+
scale_color_manual_interactive(values=school_colors1,
labels = str_to_title(names(school_colors1)))+
geom_segment(data=base_data1, aes(x = start, y = -1, xend = end, yend = -1),
colour = "grey", alpha=0.8, linewidth=0.6 , inherit.aes = FALSE )  +
geom_text(data=base_data1, aes(x = title_position, y = -4, label=str_to_title(species)),
hjust=c(0.5,0.5,0.3,0.3,0.4,0.5,0.6,0.6),
vjust=c(1,1,1,0,0,0,0,0),
colour = "grey", alpha=0.8, family="goudy_bookletter", inherit.aes = FALSE)+
coord_radial(start=0*pi, end=2*pi, inner.radius=0.5,
r.axis.inside = TRUE)+
theme(axis.text.y=element_text(family="goudy_bookletter", size=10),
legend.text = element_text(family = "goudy_bookletter", size = 14),
legend.title = element_text(family = "goudy_bookletter", size = 14),
legend.background = element_blank(),
legend.box.background = element_blank(),
legend.position = "top",
legend.box="horizontal",
legend.direction = "horizontal",
plot.margin = margin(0,0,0,0))+
labs(color="School:",
y="Level")+
guides(fill="none")
p2
p2 <- ggplot(sbs_unnested, aes(id, level, tooltip = paste(paste0(name, ":"), description, sep = "\n\n"), data_id = name))+
geom_point_interactive(aes(color=school, fill=school), size=2)+
theme_void()+
scale_y_discrete(limits=rev)+
scale_fill_manual_interactive(values=school_colors1)+
scale_color_manual_interactive(values=school_colors1,
labels = str_to_title(names(school_colors1)))+
geom_segment(data=base_data1, aes(x = start, y = -1, xend = end, yend = -1),
colour = "grey", alpha=0.8, linewidth=0.6 , inherit.aes = FALSE )  +
geom_text(data=base_data1, aes(x = title_position, y = -4, label=str_to_title(species)),
hjust=c(0.5,0.5,0.3,0.3,0.4,0.5,0.2,0.6),
vjust=c(1,1,1,0,0,0,0,0),
colour = "grey", alpha=0.8, family="goudy_bookletter", inherit.aes = FALSE)+
coord_radial(start=0*pi, end=2*pi, inner.radius=0.5,
r.axis.inside = TRUE)+
theme(axis.text.y=element_text(family="goudy_bookletter", size=10),
legend.text = element_text(family = "goudy_bookletter", size = 14),
legend.title = element_text(family = "goudy_bookletter", size = 14),
legend.background = element_blank(),
legend.box.background = element_blank(),
legend.position = "top",
legend.box="horizontal",
legend.direction = "horizontal",
plot.margin = margin(0,0,0,0))+
labs(color="School:",
y="Level")+
guides(fill="none")
p2
p2 <- ggplot(sbs_unnested, aes(id, level, tooltip = paste(paste0(name, ":"), description, sep = "\n\n"), data_id = name))+
geom_point_interactive(aes(color=school, fill=school), size=2)+
theme_void()+
scale_y_discrete(limits=rev)+
scale_fill_manual_interactive(values=school_colors1)+
scale_color_manual_interactive(values=school_colors1,
labels = str_to_title(names(school_colors1)))+
geom_segment(data=base_data1, aes(x = start, y = -1, xend = end, yend = -1),
colour = "grey", alpha=0.8, linewidth=0.6 , inherit.aes = FALSE )  +
geom_text(data=base_data1, aes(x = title_position, y = -4, label=str_to_title(species)),
hjust=c(0.5,0.5,0.3,0.3,0.4,0.4,0.2,0.6),
vjust=c(1,1,1,0,0,0,0,0),
colour = "grey", alpha=0.8, family="goudy_bookletter", inherit.aes = FALSE)+
coord_radial(start=0*pi, end=2*pi, inner.radius=0.5,
r.axis.inside = TRUE)+
theme(axis.text.y=element_text(family="goudy_bookletter", size=10),
legend.text = element_text(family = "goudy_bookletter", size = 14),
legend.title = element_text(family = "goudy_bookletter", size = 14),
legend.background = element_blank(),
legend.box.background = element_blank(),
legend.position = "top",
legend.box="horizontal",
legend.direction = "horizontal",
plot.margin = margin(0,0,0,0))+
labs(color="School:",
y="Level")+
guides(fill="none")
p2
p2 <- ggplot(sbs_unnested, aes(id, level, tooltip = paste(paste0(name, ":"), description, sep = "\n\n"), data_id = name))+
geom_point_interactive(aes(color=school, fill=school), size=2)+
theme_void()+
scale_y_discrete(limits=rev)+
scale_fill_manual_interactive(values=school_colors1)+
scale_color_manual_interactive(values=school_colors1,
labels = str_to_title(names(school_colors1)))+
geom_segment(data=base_data1, aes(x = start, y = -1, xend = end, yend = -1),
colour = "grey", alpha=0.8, linewidth=0.6 , inherit.aes = FALSE )  +
geom_text(data=base_data1, aes(x = title_position, y = -4, label=str_to_title(species)),
hjust=c(0.5,0.5,0.3,0.3,0.4,0.6,0.2,0.6),
vjust=c(1,1,1,0,0,0,0,0),
colour = "grey", alpha=0.8, family="goudy_bookletter", inherit.aes = FALSE)+
coord_radial(start=0*pi, end=2*pi, inner.radius=0.5,
r.axis.inside = TRUE)+
theme(axis.text.y=element_text(family="goudy_bookletter", size=10),
legend.text = element_text(family = "goudy_bookletter", size = 14),
legend.title = element_text(family = "goudy_bookletter", size = 14),
legend.background = element_blank(),
legend.box.background = element_blank(),
legend.position = "top",
legend.box="horizontal",
legend.direction = "horizontal",
plot.margin = margin(0,0,0,0))+
labs(color="School:",
y="Level")+
guides(fill="none")
p2
plot <- wrap_plots(title, p2, design = layout, heights = c(2,5,5,5))
i_plot <- girafe(ggobj = plot, fonts = list(sans = font), width_svg = 10, height_svg = 10)
i_plot <- girafe_options(i_plot, opts_hover(css = hover_css),
opts_tooltip(css = tooltip_css,
offx = 350, offy = 60,
use_cursor_pos = FALSE,
use_fill = TRUE),
opts_hover_inv(css = "opacity:0.2"))
i_plot
tooltip_css <- "color:white;
padding:5px;
border-radius:3px;
font-size:12px;
font-family: 'Goudy Bookletter 1911', serif;
width:220px;"
i_plot <- girafe_options(i_plot, opts_hover(css = hover_css),
opts_tooltip(css = tooltip_css,
offx = 350, offy = 60,
use_cursor_pos = FALSE,
use_fill = TRUE),
opts_hover_inv(css = "opacity:0.2"))
i_plot
htmlwidgets::saveWidget(i_plot, "spells_v2.html",
selfcontained = FALSE)
setwd("~/Documents/GitHub/portfolio/dataviz-blog/assets/images/dnd")
htmlwidgets::saveWidget(i_plot, "spells_v2.html",
selfcontained = FALSE)
i_plot <- girafe_options(i_plot, opts_hover(css = hover_css),
opts_tooltip(css = tooltip_css,
offx = 350, offy = 350,
use_cursor_pos = FALSE,
use_fill = TRUE),
opts_hover_inv(css = "opacity:0.2"))
htmlwidgets::saveWidget(i_plot, "spells_v2.html",
selfcontained = FALSE)
i_plot <- girafe_options(i_plot, opts_hover(css = hover_css),
opts_tooltip(css = tooltip_css,
offx = 350, offy = 600,
use_cursor_pos = FALSE,
use_fill = TRUE),
opts_hover_inv(css = "opacity:0.2"))
htmlwidgets::saveWidget(i_plot, "spells_v2.html",
selfcontained = FALSE)
i_plot <- girafe_options(i_plot, opts_hover(css = hover_css),
opts_tooltip(css = tooltip_css,
offx = 350, offy = 350,
use_cursor_pos = FALSE,
use_fill = TRUE),
opts_hover_inv(css = "opacity:0.2"))
htmlwidgets::saveWidget(i_plot, "spells_v2.html",
selfcontained = FALSE)
i_plot <- girafe_options(i_plot, opts_hover(css = hover_css),
opts_tooltip(css = tooltip_css,
offx = 300, offy = 360,
use_cursor_pos = FALSE,
use_fill = TRUE),
opts_hover_inv(css = "opacity:0.2"))
i_plot
htmlwidgets::saveWidget(i_plot, "spells_v2.html",
selfcontained = FALSE)
tooltip_css <- "color:white;
padding:5px;
border-radius:3px;
font-size:12px;
font-family: 'Goudy Bookletter 1911', serif;
width:180px;"
i_plot <- girafe_options(i_plot, opts_hover(css = hover_css),
opts_tooltip(css = tooltip_css,
offx = 300, offy = 360,
use_cursor_pos = FALSE,
use_fill = TRUE),
opts_hover_inv(css = "opacity:0.2"))
htmlwidgets::saveWidget(i_plot, "spells_v2.html",
selfcontained = FALSE)
tooltip_css <- "color:white;
padding:5px;
border-radius:3px;
font-size:12px;
font-family: 'Goudy Bookletter 1911', serif;
width:170px;"
i_plot <- girafe_options(i_plot, opts_hover(css = hover_css),
opts_tooltip(css = tooltip_css,
offx = 300, offy = 360,
use_cursor_pos = FALSE,
use_fill = TRUE),
opts_hover_inv(css = "opacity:0.2"))
htmlwidgets::saveWidget(i_plot, "spells_v2.html",
selfcontained = FALSE)
p2 <- ggplot(sbs_unnested, aes(id, level, tooltip = paste(paste0(name, ":"), description, sep = "\n\n"), data_id = name))+
geom_point_interactive(aes(color=school, fill=school), size=2)+
theme_void()+
scale_y_discrete(limits=rev)+
scale_fill_manual_interactive(values=school_colors1)+
scale_color_manual_interactive(values=school_colors1,
labels = str_to_title(names(school_colors1)))+
geom_segment(data=base_data1, aes(x = start, y = -1, xend = end, yend = -1),
colour = "grey", alpha=0.8, linewidth=0.6 , inherit.aes = FALSE )  +
geom_text(data=base_data1, aes(x = title_position, y = -4, label=str_to_title(species)),
hjust=c(0.5,0.5,0.3,0.3,0.4,0.6,0.2,0.6),
vjust=c(1,1,1,0,0,0,0,0),
alpha=0.8, family="goudy_bookletter", inherit.aes = FALSE)+
coord_radial(start=0*pi, end=2*pi, inner.radius=0.5,
r.axis.inside = TRUE)+
theme(axis.text.y=element_text(family="goudy_bookletter", size=10),
legend.text = element_text(family = "goudy_bookletter", size = 14),
legend.title = element_text(family = "goudy_bookletter", size = 14),
legend.background = element_blank(),
legend.box.background = element_blank(),
legend.position = "top",
legend.box="horizontal",
legend.direction = "horizontal",
plot.margin = margin(0,0,0,0))+
labs(color="School:",
y="Level")+
guides(fill="none")
p2
plot <- wrap_plots(title, p2, design = layout, heights = c(2,5,5,5))
i_plot <- girafe(ggobj = plot, fonts = list(sans = font), width_svg = 10, height_svg = 10)
i_plot <- girafe_options(i_plot, opts_hover(css = hover_css),
opts_tooltip(css = tooltip_css,
offx = 300, offy = 360,
use_cursor_pos = FALSE,
use_fill = TRUE),
opts_hover_inv(css = "opacity:0.2"))
i_plot
htmlwidgets::saveWidget(i_plot, "spells_v2.html",
selfcontained = FALSE)
