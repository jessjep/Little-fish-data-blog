layout <- c(
area(1,1,1,2),
area(2,1),
area(3,1), area(3,2),
area(4,1), area(4,2),
area(5,1), area(5,2),
area(6,1), area(6,2)
)
combined <- wrap_plots(title2, guide_area(),
plots$plot[[1]], plots$plot[[3]],
plots$plot[[2]], plots$plot[[7]],
plots$plot[[6]], plots$plot[[5]],
plots$plot[[4]], plots$plot[[8]],
guides = "collect",
design=layout, ncol = 2, nrow = 6,
heights = c(1,2,4,4,4,4))
interactive_plot2 <- girafe(ggobj = combined, fonts = list(sans = font),
width_svg = 18, height_svg = 24)
interactive_plot2 <- girafe_options(interactive_plot2,
opts_hover(css = hover_css),
opts_tooltip(css = tooltip_css,
offx = 200,
offy = 60, use_cursor_pos = FALSE,
use_fill = TRUE),
opts_hover_inv(css = "opacity:0.2"))
interactive_plot2
#wide version
wide_layout <- c(
area(1,1,1,7),
area(2,2,2,3),
area(3,1,3,3), area(3,3,3,5),
area(4,1,4,3), area(4,3,4,5), area(4,5,4,7),
area(5,1,5,3), area(5,3,5,5), area(5,5,5,7)
)
wide_combined <- wrap_plots(title2, guide_area(),
plots$plot[[1]], plots$plot[[3]],
plots$plot[[2]], plots$plot[[7]],
plots$plot[[6]], plots$plot[[5]],
plots$plot[[4]], plots$plot[[8]],
guides = "collect",
design=wide_layout, ncol = 2, nrow = 6,
heights = c(2,3,4,4,4),
widths=c(1,1,3,1,3,1,1))
widei <- girafe(ggobj = wide_combined, fonts = list(sans = font),
width_svg = 24, height_svg = 18)
widei <- girafe_options(widei, opts_hover(css = hover_css),
opts_tooltip(css = tooltip_css,
offx = 800,
offy = 60,
use_cursor_pos = FALSE,
use_fill = TRUE),
opts_hover_inv(css = "opacity:0.2"))
widei
plots <- spells_by_species |>
mutate(plot = map2(data, species,
~ggplot(.x, aes(id, level, tooltip = paste(paste0(name, ":"),
paste0(str_extract(description, "^(.*?\\.){1,2}"), "..."),
sep="\n\n"),
data_id = name))+
geom_point_interactive(aes(color=school, fill=school, shape=component), size=6)+
geom_segment(aes(x=min(id), y=1.1*max(as.numeric(level)), xend = 0.5*max(id), yend=1.1*max(as.numeric(level))),
color = "#333", linewidth=0.05, inherit.aes = FALSE)+
geom_text(aes(x = 0.25*max(id), y = 1.25*max(as.numeric(level))), angle=50,
label = str_to_title(.y), size = 11, family = font, color="#333")+
scale_shape_manual(values = c(4,3,20),
labels = c("Material", "Somatic", "Verbal"))+
theme(axis.text.x=element_blank(),
axis.ticks.x=element_blank(),
axis.title.x=element_blank(),
axis.text.y=element_text(family=font, size=14),
axis.title.y = element_blank(),
axis.ticks.y=element_blank(),
plot.background = element_blank(),
panel.background = element_blank(),
panel.grid.minor = element_blank(),
panel.grid.major.x = element_blank(),
legend.text = element_text(family = font, size = 24),
legend.title = element_text(family = font, size = 26),
legend.background = element_blank(),
legend.box.background = element_blank(),
legend.position = "top",
legend.box="horizontal",
legend.direction = "horizontal",
plot.margin = margin(0,0,0,0))+
guides(fill="none")+
scale_y_discrete(limits=rev)+
labs(color="School:", shape="Casting Component:")+
scale_fill_manual_interactive(values=school_colors1)+
scale_color_manual_interactive(values=school_colors1,
labels = str_to_title(names(school_colors1)))+
coord_radial(start = -0.5 * pi, end = 0.5 * pi,
direction=1, inner.radius = 0.4, r.axis.inside = TRUE)
)
)
plots$plot[[6]] <- plots$plot[[6]] + theme(legend.position = "none")
wide_combined <- wrap_plots(title2, guide_area(),
plots$plot[[1]], plots$plot[[3]],
plots$plot[[2]], plots$plot[[7]],
plots$plot[[6]], plots$plot[[5]],
plots$plot[[4]], plots$plot[[8]],
guides = "collect",
design=wide_layout, ncol = 2, nrow = 6,
heights = c(2,3,4,4,4),
widths=c(1,1,4,1,4,1,1))
widei <- girafe(ggobj = wide_combined, fonts = list(sans = font),
width_svg = 24, height_svg = 18)
widei <- girafe_options(widei, opts_hover(css = hover_css),
opts_tooltip(css = tooltip_css,
offx = 800,
offy = 60,
use_cursor_pos = FALSE,
use_fill = TRUE),
opts_hover_inv(css = "opacity:0.2"))
widei
plots <- spells_by_species |>
mutate(plot = map2(data, species,
~ggplot(.x, aes(id, level, tooltip = paste(paste0(name, ":"),
paste0(str_extract(description, "^(.*?\\.){1,2}"), "..."),
sep="\n\n"),
data_id = name))+
geom_point_interactive(aes(color=school, fill=school, shape=component), size=6)+
geom_segment(aes(x=min(id), y=1.1*max(as.numeric(level)), xend = 0.5*max(id), yend=1.1*max(as.numeric(level))),
color = "#A8A8A8", linewidth=0.05, inherit.aes = FALSE)+
geom_text(aes(x = 0.28*max(id), y = 1.25*max(as.numeric(level))), angle=50,
label = str_to_title(.y), size = 11, family = font, color="#333")+
scale_shape_manual(values = c(4,3,20),
labels = c("Material", "Somatic", "Verbal"))+
theme(axis.text.x=element_blank(),
axis.ticks.x=element_blank(),
axis.title.x=element_blank(),
axis.text.y=element_text(family=font, size=14),
axis.title.y = element_blank(),
axis.ticks.y=element_blank(),
plot.background = element_blank(),
panel.background = element_blank(),
panel.grid.minor = element_blank(),
panel.grid.major.x = element_blank(),
legend.text = element_text(family = font, size = 24),
legend.title = element_text(family = font, size = 26),
legend.background = element_blank(),
legend.box.background = element_blank(),
legend.position = "top",
legend.box="horizontal",
legend.direction = "horizontal",
plot.margin = margin(0,0,0,0))+
guides(fill="none")+
scale_y_discrete(limits=rev)+
labs(color="School:", shape="Casting Component:")+
scale_fill_manual_interactive(values=school_colors1)+
scale_color_manual_interactive(values=school_colors1,
labels = str_to_title(names(school_colors1)))+
coord_radial(start = -0.5 * pi, end = 0.5 * pi,
direction=1, inner.radius = 0.4, r.axis.inside = TRUE)
)
)
plots$plot[[6]] <- plots$plot[[6]] + theme(legend.position = "none")
wide_combined <- wrap_plots(title2, guide_area(),
plots$plot[[1]], plots$plot[[3]],
plots$plot[[2]], plots$plot[[7]],
plots$plot[[6]], plots$plot[[5]],
plots$plot[[4]], plots$plot[[8]],
guides = "collect",
design=wide_layout, ncol = 2, nrow = 6,
heights = c(2,3,4,4,4),
widths=c(1,1,4,1,4,1,1))
widei <- girafe(ggobj = wide_combined, fonts = list(sans = font),
width_svg = 24, height_svg = 18)
widei <- girafe_options(widei, opts_hover(css = hover_css),
opts_tooltip(css = tooltip_css,
offx = 800,
offy = 60,
use_cursor_pos = FALSE,
use_fill = TRUE),
opts_hover_inv(css = "opacity:0.2"))
widei
htmlwidgets::saveWidget(widei2, "spells_wide.html",
selfcontained = FALSE)
htmlwidgets::saveWidget(widei, "spells_wide.html",
selfcontained = FALSE)
setwd("~/Documents/GitHub/portfolio/dataviz-blog/assets/images/dnd")
htmlwidgets::saveWidget(widei, "spells_wide.html",
selfcontained = FALSE)
widei <- girafe_options(widei, opts_hover(css = hover_css),
opts_tooltip(css = tooltip_css,
offx = 200,
offy = 60,
use_cursor_pos = FALSE,
use_fill = TRUE),
opts_hover_inv(css = "opacity:0.2"))
htmlwidgets::saveWidget(widei, "spells_wide.html",
selfcontained = FALSE)
plot(wide_layout)
#wide version
wide_layout <- c(
area(1,1,1,7),
area(2,3,2,4),
area(3,1,3,3), area(3,3,3,5),
area(4,1,4,3), area(4,3,4,5), area(4,5,4,7),
area(5,1,5,3), area(5,3,5,5), area(5,5,5,7)
)
plot(wide_layout)
widei <- girafe_options(widei, opts_hover(css = hover_css),
opts_tooltip(css = tooltip_css,
offx = 714,
offy = 150,
use_cursor_pos = FALSE,
use_fill = TRUE),
opts_hover_inv(css = "opacity:0.2"))
htmlwidgets::saveWidget(widei, "spells_wide.html",
selfcontained = FALSE)
tooltip_css <- "color:white;padding:5px;border-radius:3px;font-family: 'Goudy Bookletter 1911', serif;
width:300px;"
interactive_plot2 <- girafe_options(interactive_plot2,
opts_hover(css = hover_css),
opts_tooltip(css = tooltip_css,
offx = 200,
offy = 60, use_cursor_pos = FALSE,
use_fill = TRUE),
opts_hover_inv(css = "opacity:0.2"))
widei <- girafe_options(widei, opts_hover(css = hover_css),
opts_tooltip(css = tooltip_css,
offx = 714,
offy = 150,
use_cursor_pos = FALSE,
use_fill = TRUE),
opts_hover_inv(css = "opacity:0.2"))
htmlwidgets::saveWidget(widei, "spells_wide.html",
selfcontained = FALSE)
#wide version
wide_layout <- c(
area(1,1,1,7),
area(2,3,2,4),
area(3,1,3,3), area(3,3,3,5),
area(4,1,4,3), area(4,3,4,5), area(4,5,4,7),
area(5,1,5,3), area(5,3,5,5), area(5,5,5,7)
)
plot(wide_layout)
wide_combined <- wrap_plots(title2, guide_area(),
plots$plot[[1]], plots$plot[[3]],
plots$plot[[2]], plots$plot[[7]],
plots$plot[[6]], plots$plot[[5]],
plots$plot[[4]], plots$plot[[8]],
guides = "collect",
design=wide_layout, ncol = 2, nrow = 6,
heights = c(2,3,4,4,4),
widths=c(1,1,4,1,4,1,1))
widei <- girafe(ggobj = wide_combined, fonts = list(sans = font),
width_svg = 24, height_svg = 18)
widei <- girafe_options(widei, opts_hover(css = hover_css),
opts_tooltip(css = tooltip_css,
offx = 650,
offy = 130,
use_cursor_pos = FALSE,
use_fill = TRUE),
opts_hover_inv(css = "opacity:0.2"))
widei
htmlwidgets::saveWidget(widei, "spells_wide.html",
selfcontained = FALSE)
plots <- spells_by_species |>
mutate(plot = map2(data, species,
~ggplot(.x, aes(id, level, tooltip = paste(paste0(name, ":"),
paste0(str_extract(description, "^(.*?\\.){1,2}"), "..."),
sep="\n\n"),
data_id = name))+
geom_point_interactive(aes(color=school, fill=school, shape=component), size=6)+
geom_segment(aes(x=min(id), y=1.1*max(as.numeric(level)), xend = 0.5*max(id), yend=1.1*max(as.numeric(level))),
color = "#A8A8A8", linewidth=0.05, inherit.aes = FALSE)+
geom_text(aes(x = 0.28*max(id), y = 1.25*max(as.numeric(level))), angle=48,
label = str_to_title(.y), size = 11, family = font, color="#333")+
scale_shape_manual(values = c(4,3,20),
labels = c("Material", "Somatic", "Verbal"))+
theme(axis.text.x=element_blank(),
axis.ticks.x=element_blank(),
axis.title.x=element_blank(),
axis.text.y=element_text(family=font, size=14),
axis.title.y = element_blank(),
axis.ticks.y=element_blank(),
plot.background = element_blank(),
panel.background = element_blank(),
panel.grid.minor = element_blank(),
panel.grid.major.x = element_blank(),
legend.text = element_text(family = font, size = 24),
legend.title = element_text(family = font, size = 26),
legend.background = element_blank(),
legend.box.background = element_blank(),
legend.position = "top",
legend.box="horizontal",
legend.direction = "horizontal",
plot.margin = margin(0,0,0,0))+
guides(fill="none")+
scale_y_discrete(limits=rev)+
labs(color="School:", shape="Casting Component:")+
scale_fill_manual_interactive(values=school_colors1)+
scale_color_manual_interactive(values=school_colors1,
labels = str_to_title(names(school_colors1)))+
coord_radial(start = -0.5 * pi, end = 0.5 * pi,
direction=1, inner.radius = 0.4, r.axis.inside = TRUE)
)
)
plots$plot[[6]] <- plots$plot[[6]] + theme(legend.position = "none")
#wide version
wide_layout <- c(
area(1,1,1,7),
area(2,3,2,5),
area(3,1,3,3), area(3,3,3,5),
area(4,1,4,3), area(4,3,4,5), area(4,5,4,7),
area(5,1,5,3), area(5,3,5,5), area(5,5,5,7)
)
plot(wide_layout)
wide_combined <- wrap_plots(title2, guide_area(),
plots$plot[[1]], plots$plot[[3]],
plots$plot[[2]], plots$plot[[7]],
plots$plot[[6]], plots$plot[[5]],
plots$plot[[4]], plots$plot[[8]],
guides = "collect",
design=wide_layout, ncol = 2, nrow = 6,
heights = c(2,3,4,4,4),
widths=c(1,1,5,1,5,1,1))
widei <- girafe(ggobj = wide_combined, fonts = list(sans = font),
width_svg = 24, height_svg = 18)
widei <- girafe_options(widei, opts_hover(css = hover_css),
opts_tooltip(css = tooltip_css,
offx = 650,
offy = 130,
use_cursor_pos = FALSE,
use_fill = TRUE),
opts_hover_inv(css = "opacity:0.2"))
widei
#wide version
wide_layout <- c(
area(1,1,1,7),
area(2,3,2,4),
area(3,1,3,3), area(3,3,3,5),
area(4,1,4,3), area(4,3,4,5), area(4,5,4,7),
area(5,1,5,3), area(5,3,5,5), area(5,5,5,7)
)
wide_combined <- wrap_plots(title2, guide_area(),
plots$plot[[1]], plots$plot[[3]],
plots$plot[[2]], plots$plot[[7]],
plots$plot[[6]], plots$plot[[5]],
plots$plot[[4]], plots$plot[[8]],
guides = "collect",
design=wide_layout, ncol = 2, nrow = 6,
heights = c(2,3,4,4,4),
widths=c(1,1,6,1,6,1,1))
widei <- girafe(ggobj = wide_combined, fonts = list(sans = font),
width_svg = 24, height_svg = 18)
widei <- girafe_options(widei, opts_hover(css = hover_css),
opts_tooltip(css = tooltip_css,
offx = 650,
offy = 130,
use_cursor_pos = FALSE,
use_fill = TRUE),
opts_hover_inv(css = "opacity:0.2"))
widei
widei <- girafe(ggobj = wide_combined, fonts = list(sans = font),
width_svg = 24, height_svg = 20)
widei <- girafe_options(widei, opts_hover(css = hover_css),
opts_tooltip(css = tooltip_css,
offx = 650,
offy = 130,
use_cursor_pos = FALSE,
use_fill = TRUE),
opts_hover_inv(css = "opacity:0.2"))
widei
#setting the aesthetics of the hover and hover text
hover_css <- "cursor:pointer; filter: brightness(1.2) drop-shadow(0px 0px 2px rgba(47, 35, 41, 0.2));stroke-width:4;r:5px;
transition: all 0.3s ease;"
widei <- girafe_options(widei, opts_hover(css = hover_css),
opts_tooltip(css = tooltip_css,
offx = 620,
offy = 130,
use_cursor_pos = FALSE,
use_fill = TRUE),
opts_hover_inv(css = "opacity:0.2"))
htmlwidgets::saveWidget(widei, "spells_wide.html",
selfcontained = FALSE)
widei <- girafe_options(widei, opts_hover(css = hover_css),
opts_tooltip(css = tooltip_css,
offx = 620,
offy = 130,
use_cursor_pos = FALSE,
use_fill = TRUE),
opts_selection(type = "multiple", only_shiny = FALSE),
opts_hover_inv(css = "opacity:0.2"))
htmlwidgets::saveWidget(widei, "spells_wide.html",
selfcontained = FALSE)
plots <- spells_by_species |>
mutate(plot = map2(data, species,
~ggplot(.x, aes(id, level, tooltip = paste(paste0(name, ":"),
description,
sep="\n\n"),
data_id = name))+
geom_point_interactive(aes(color=school, fill=school, shape=component), size=6)+
geom_segment(aes(x=min(id), y=1.1*max(as.numeric(level)), xend = 0.5*max(id), yend=1.1*max(as.numeric(level))),
color = "#A8A8A8", linewidth=0.05, inherit.aes = FALSE)+
geom_text(aes(x = 0.28*max(id), y = 1.25*max(as.numeric(level))), angle=48,
label = str_to_title(.y), size = 11, family = font, color="#333")+
scale_shape_manual(values = c(4,3,20),
labels = c("Material", "Somatic", "Verbal"))+
theme(axis.text.x=element_blank(),
axis.ticks.x=element_blank(),
axis.title.x=element_blank(),
axis.text.y=element_text(family=font, size=14),
axis.title.y = element_blank(),
axis.ticks.y=element_blank(),
plot.background = element_blank(),
panel.background = element_blank(),
panel.grid.minor = element_blank(),
panel.grid.major.x = element_blank(),
legend.text = element_text(family = font, size = 24),
legend.title = element_text(family = font, size = 26),
legend.background = element_blank(),
legend.box.background = element_blank(),
legend.position = "top",
legend.box="horizontal",
legend.direction = "horizontal",
plot.margin = margin(0,0,0,0))+
guides(fill="none")+
scale_y_discrete(limits=rev)+
labs(color="School:", shape="Casting Component:")+
scale_fill_manual_interactive(values=school_colors1)+
scale_color_manual_interactive(values=school_colors1,
labels = str_to_title(names(school_colors1)))+
coord_radial(start = -0.5 * pi, end = 0.5 * pi,
direction=1, inner.radius = 0.4, r.axis.inside = TRUE)
)
)
plots <- spells_by_species |>
mutate(plot = map2(data, species,
~ggplot(.x, aes(id, level, tooltip = paste(paste0(name, ":"),
description,
sep="\n\n")),
data_id = name))+
geom_point_interactive(aes(color=school, fill=school, shape=component), size=6)+
geom_segment(aes(x=min(id), y=1.1*max(as.numeric(level)), xend = 0.5*max(id), yend=1.1*max(as.numeric(level))),
color = "#A8A8A8", linewidth=0.05, inherit.aes = FALSE)+
geom_text(aes(x = 0.28*max(id), y = 1.25*max(as.numeric(level))), angle=48,
label = str_to_title(.y), size = 11, family = font, color="#333")+
scale_shape_manual(values = c(4,3,20),
labels = c("Material", "Somatic", "Verbal"))+
theme(axis.text.x=element_blank(),
axis.ticks.x=element_blank(),
axis.title.x=element_blank(),
axis.text.y=element_text(family=font, size=14),
axis.title.y = element_blank(),
axis.ticks.y=element_blank(),
plot.background = element_blank(),
panel.background = element_blank(),
panel.grid.minor = element_blank(),
panel.grid.major.x = element_blank(),
legend.text = element_text(family = font, size = 24),
legend.title = element_text(family = font, size = 26),
legend.background = element_blank(),
legend.box.background = element_blank(),
legend.position = "top",
legend.box="horizontal",
legend.direction = "horizontal",
plot.margin = margin(0,0,0,0))+
guides(fill="none")+
scale_y_discrete(limits=rev)+
labs(color="School:", shape="Casting Component:")+
scale_fill_manual_interactive(values=school_colors1)+
scale_color_manual_interactive(values=school_colors1,
labels = str_to_title(names(school_colors1)))+
coord_radial(start = -0.5 * pi, end = 0.5 * pi,
direction=1, inner.radius = 0.4, r.axis.inside = TRUE)
)
spells_by_species <- spells_by_species |>
mutate(data = map(data, ~ .x |>
arrange(name) |>                              # Arrange by name
mutate(level = factor(level)) |>              # Convert level to a factor
group_by(level) |>                            # Group by level
mutate(id = row_number()) |>                  # Create a new id column
pivot_longer(cols = 13:15,                    # Pivot specified columns
names_to = "component",
values_to = "binary2") |>
filter(binary2 == TRUE)))                     # Filter rows where binary2 is TRUE
source("~/Documents/GitHub/Tidy Tuesday/17-12-24/spells_v3.R", echo=TRUE)
#setting the aesthetics of the hover and hover text
hover_css <- "cursor:pointer; filter: brightness(1.2) drop-shadow(0px 0px 2px rgba(47, 35, 41, 0.2));stroke-width:4;r:5px;
transition: all 0.3s ease;"
widei <- girafe(ggobj = wide_combined, fonts = list(sans = font),
width_svg = 24, height_svg = 22)
widei <- girafe_options(widei, opts_hover(css = hover_css),
opts_tooltip(css = tooltip_css,
offx = 620,
offy = 130,
use_cursor_pos = FALSE,
use_fill = TRUE),
opts_hover_inv(css = "opacity:0.2"))
widei
widei <- girafe(ggobj = wide_combined, fonts = list(sans = font),
width_svg = 26, height_svg = 24)
widei <- girafe_options(widei, opts_hover(css = hover_css),
opts_tooltip(css = tooltip_css,
offx = 620,
offy = 130,
use_cursor_pos = FALSE,
use_fill = TRUE),
opts_hover_inv(css = "opacity:0.2"))
widei
widei <- girafe(ggobj = wide_combined, fonts = list(sans = font),
width_svg = 24, height_svg = 20)
widei <- girafe_options(widei, opts_hover(css = hover_css),
opts_tooltip(css = tooltip_css,
offx = 620,
offy = 130,
use_cursor_pos = FALSE,
use_fill = TRUE),
opts_hover_inv(css = "opacity:0.2"))
widei
